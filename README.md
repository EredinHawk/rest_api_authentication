## JWT авторизация

### <u>Цель:</u>

Спроектировать конечную точку REST API, доступ к которой предоставлен только авторизованным клиентам с обязательным наличием JWT. 

Также реализовать сервис аутентификации, который будет регистрировать новых пользователей, предоставлять им JWT и проверять их же на валидность в случае запроса к закрытому ресурсу. Время действия токена должно быть ограничено 15 минутами, по истечении которых доступ к ресурсу без повторной авторизации будет прекращен.

### <u>Задачи:</u>

- [x] Реализовать конечную точку REST API без ограничений;
- [x] Добавить ограничение к конечной точке в виде обязательного наличия http заголовка 'Authorization' в каждом запросе;
- [x] Реализовать конечную точку регистрации нового пользователя и фейковую БД в памяти приложения;
- [x] Добавить функцию генерации JWT после успешного добавления в БД нового пользователя;
- [x] Добавить функцию проверки JWT на валидность. (Токен должен протухнуть после 15 минут);
- [x] Проверить работу приложения в Postman.
<br></br>

![alt text](/images/Обложка.png)

<hr>

### <u>Демонстрация работы:</u>

#### <u>Запрос к API без авторизации:</u>

![alt text](/images/Postman_error.png)

Обязательные требования закрытого API:

1. Наличие обязательного заголовка 'Authorization'

2. HMAC-SHA метод подписи токена

3. Время жизни токена должно быть не более 15 минут

4. Проверка токена на валидность.

На изображении сверху продемонстрирована попытка неавторизированного доступа к закрытому API, то есть отсутствует строка JWT в заголовке запроса. Пока все описанные требования не будут выполнены, результат будет предсказуемый — HTTP-код 401 и сообщение с текстом ошибки.

<hr>

#### <u>Процесс аутентификации:</u>

![alt text](/images/Postman_auth.png)

Доступ к закрытому API предоставляется только авторизированным пользователям. Поэтому необходимо пройти процесс регистрации и в результате получить строку JWT.

Для успешного результата обработчик сначала считает из тела запроса регистрационные данные, проверит в БД, свободен ли такой логин, добавит нового пользователя и только после этого вернет HTTP ответ с кодом 201 и строкой JWT, которая понадобится для доступа к закрытому API.

<hr>

#### <u>Авторизированный запрос к API:</u>

![alt text](/images/Postman_success.png)

Готово!